<!DOCTYPE html>
<html>
<head>
  <title>Standard Naming</title>
  <script src="https://unpkg.com/vue"></script>
</head>
<body>

  <div id="app">
    <template v-for="(msg,index) in messages">
      <currency-input
        v-model="msg.logical"
        v-bind:physical="physical(index)"
        v-bind:business="business(index)"
        v-bind:standard-define="standardDefine(index)"
        v-on:add-new-row="addNewRow(index)"
      ></currency-input>
    </template>
  </div>

  <script src="https://unpkg.com/lodash@4.13.1/lodash.min.js"></script>
  <script>

    Vue.component('currency-input', {
      template: '\
        <div>\
          <input\
            ref="input"\
            v-bind:value="value"\
            v-on:input="updateValue($event.target.value)"\
            v-on:keyup.enter="addNewRow($event.target.value)"\
          >\
          {{ physical }}\
          {{ business }}\
          {{ standardDefine }}\
        </div>\
      ',
      props: {
        value: {
          type: String,
          default: ''
        },
        physical: {
          type: String,
          default: ''
        },
        business: {
          type: String,
          default: ''
        },
        standardDefine: {
          type: String,
          default: 'NO'
        }
      },
      methods: {
        updateValue: function (value) {
          this.$emit('input', value)
        },
        addNewRow: function (value) {
          if(value !== '') {
            this.$emit('add-new-row')
          }
        }
      }
    })

    new Vue({
      el: '#app',
      data: {
        messages : [{ logical: '' }]
      },
      methods: {
        physical: function (index) {
          return this.messages[index].logical
        },
        business: function (index) {
          return this.messages[index].logical
        },
        standardDefine: function (index) {
          if(this.messages[index].logical.length % 2 === 0) {
            return 'YES'
          } else {
            return 'NO'
          }
        },
        addNewRow: function (index) {
          this.messages.splice(index+1,0,{ logical: 'insertRow' })
        }
      }
    })

  </script>
</body>
</html>
